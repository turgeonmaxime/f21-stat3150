## ----setup, include=FALSE-----------------------------------------------------
library(knitr)
hook_output = knit_hooks$get('output')
knit_hooks$set(output = function(x, options) {
  # this hook is used only when the linewidth option is not NULL
  if (!is.null(n <- options$linewidth)) {
    x = knitr:::split_lines(x)
    # any lines wider than n should be wrapped
    if (any(nchar(x) > n)) x = strwrap(x, width = n)
    x = paste(x, collapse = '\n')
  }
  hook_output(x, options)
})

knitr::opts_chunk$set(cache = FALSE, message = TRUE,
                      linewidth = 50)

set.seed(3150)


## -----------------------------------------------------------------------------
# Create a vector
vect <- c(2, 6, 3, 5.5)

# What is its mean?
# Using for loops
n <- length(vect)
sum <- 0 # Initialize

for (i in 1:n) { # R is 1-indexed!
  sum <- sum + vect[i]
}


## -----------------------------------------------------------------------------
mean <- sum/n
mean


## -----------------------------------------------------------------------------
# In R, use vectorized functions
# whenever possible
mean(vect)


## -----------------------------------------------------------------------------
# These are all equivalent
x <- 10
10 -> x
x = 10
assign("x", 10)


## -----------------------------------------------------------------------------
x <- c(0, 5, 12, 8)
x


## -----------------------------------------------------------------------------
y <- c(3, 2)
c(x, y)


## -----------------------------------------------------------------------------
c(1, 2.5, "Stat", FALSE)


## -----------------------------------------------------------------------------
seq(from = 1, to = 3, by = 0.5)
# Equivalently
seq(1, 3, by = 0.5)


## -----------------------------------------------------------------------------
# Decreasing sequences
seq(1, 0, by = -0.2)


## -----------------------------------------------------------------------------
1:5
1:(-2)


## -----------------------------------------------------------------------------
x[2]


## -----------------------------------------------------------------------------
 x[c(1, 3)]


## -----------------------------------------------------------------------------
x[c(-2, -4)]


## -----------------------------------------------------------------------------
x_large <- x > 7
x_large
x[x_large]


## -----------------------------------------------------------------------------
which(x_large)
x[which(x_large)]


## -----------------------------------------------------------------------------
7 <= 5
7 != 5


## -----------------------------------------------------------------------------
# Even works with character values
"abc" < "bca"


## -----------------------------------------------------------------------------
7 == 5


## -----------------------------------------------------------------------------
y <- rep(10, times = 4) # rep for repeat
y
x < y


## -----------------------------------------------------------------------------
x < 10


## -----------------------------------------------------------------------------
(x > 3) & (x < 10)
(x < 3) | (x > 10)


## -----------------------------------------------------------------------------
z <- 1:4
x + z
x * z
z / x


## -----------------------------------------------------------------------------
A_mat <- matrix(1:4, nrow = 2, ncol = 2)
A_mat


## -----------------------------------------------------------------------------
B_mat <- matrix(1:4, nrow = 2, ncol = 2, byrow = TRUE)
B_mat


## -----------------------------------------------------------------------------
A_mat * B_mat


## -----------------------------------------------------------------------------
A_mat[1, 2]
A_mat[3]


## -----------------------------------------------------------------------------
B_mat[, 2]


## -----------------------------------------------------------------------------
B_mat %*% t(A_mat)


## -----------------------------------------------------------------------------
A_mat %*% c(2, 3)
c(5, 1) %*% A_mat


## -----------------------------------------------------------------------------
solve(A_mat)


## -----------------------------------------------------------------------------
course <- list(3150, "Statistical Computing", 
               FALSE, 3.0)
course


## -----------------------------------------------------------------------------
course[4]


## -----------------------------------------------------------------------------
course[[4]]


## -----------------------------------------------------------------------------
c("STAT", course)


## -----------------------------------------------------------------------------
names(course) <- c("Number", "Title", 
                   "Lab", "Credit_hours")
course


## -----------------------------------------------------------------------------
course[["Title"]]
course$Title


## -----------------------------------------------------------------------------
other_course <- list(Number = 4150, 
                     Title = "Bayesian Statistics", 
                     Lab = FALSE, Credit_hours = 3.0)
other_course


## -----------------------------------------------------------------------------
course$Dept <- "STAT"
course
other_course[["Dept"]] <- "STAT"


## -----------------------------------------------------------------------------
courses <- data.frame(Dept = c("STAT", "STAT"), 
                      Number = c(3150, 4150), 
                      Title =c("Statistical Computing",
                                "Bayesian Statistics"),
                      Lab = c(FALSE, FALSE), 
                      Credit_hours = c(3.0, 3.0))


## -----------------------------------------------------------------------------
courses


## -----------------------------------------------------------------------------
courses[2, "Title"]


## -----------------------------------------------------------------------------
courses$Lab


## ---- eval=FALSE--------------------------------------------------------------
## if (condition) {
##   # Block of code to be executed
##   # when condition is TRUE
## } else {
##   # Another block of code to be executed
##   # when condition is FALSE
## }


## -----------------------------------------------------------------------------
# Sample 1 value from a standard normal
x <- rnorm(1)
if (x < 0) {
  message("The observation x is negative.")
} else {
  message("The observation x is positive.")
}


## -----------------------------------------------------------------------------
x <- rnorm(10)
loc_measure <- "mid_point"


## -----------------------------------------------------------------------------
if (loc_measure == "mean") {
  mean(x)
} else if (loc_measure == "median") {
  median(x)
} else if (loc_measure == "mid_point") {
  0.5*(min(x) + max(x))
} else {
  stop(paste("You have to choose between mean,",
             "median and mid_point."))
}


## ---- error = TRUE------------------------------------------------------------
loc_measure <- "truncated_mean"
switch(loc_measure,
       "mean" = mean(x),
       "median" = median(x),
       "mid_point" = 0.5*(min(x) + max(x)),
       stop(paste("You have to choose between mean,\n",
             "median and mid_point."), call. = FALSE)
       )


## ---- eval = FALSE------------------------------------------------------------
## for (element in vector) {
##   # Block of code to be repeated
##   # once for each element of vector
## }


## -----------------------------------------------------------------------------
for (k in 3:0) {
  message(k)
  if (k == 0) message("Blast off!")
}


## -----------------------------------------------------------------------------
N <- 10
approx <- 0
for (k in 0:(N - 1)) {
  # update current approx by adding next term
  approx <- approx + 2^{-k}     
}
approx


## -----------------------------------------------------------------------------
sum(0.5^(0:(N-1)))


## ---- eval = FALSE------------------------------------------------------------
## while (condition) {
##   # Block of code to be repeated
##   # as long as condition is TRUE
## }


## -----------------------------------------------------------------------------
num_flips <- 0
flip <- "tails"

while (flip == "tails") {
  # Flip a coin
  flip <- sample(c("tails", "heads"), size = 1)
  num_flips <- num_flips + 1
}


## -----------------------------------------------------------------------------
# How many flips?
num_flips


## -----------------------------------------------------------------------------
approx <- 0
current_err <- 2
k <- 0
while(current_err > 10^(-7)) {
  approx <- approx + 2^(-k)
  current_err <- 2 - approx
  k <- k + 1
}


## -----------------------------------------------------------------------------
# How many terms?
k


## ---- eval = FALSE------------------------------------------------------------
## new_function <- function(arg1, arg2 = def_val) {
##   # Block of code to be executed using the arguments
##   return(value)
## }


## -----------------------------------------------------------------------------
fun <- function(x) {
  if ((x >= -1) & (x < 0)) {
    value <- -x
  } else if ((x >= 0) & (x <= 1)) {
    value <- x
  } else value <- 1
  
  return(value)
}


## -----------------------------------------------------------------------------
c(fun(-3), fun(-0.3), fun(0.4), fun(1.5))


## -----------------------------------------------------------------------------
fun_cleaner <- function(x) {
  if ((x >= -1) & (x < 0)) {
    return(-x)
  }
  if ((x >= 0) & (x <= 1)) {
    return(x)
  }
  return(1)
}


## -----------------------------------------------------------------------------
c(fun_cleaner(-3), fun_cleaner(-0.3), 
  fun_cleaner(0.4), fun_cleaner(1.5))

